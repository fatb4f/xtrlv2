{
  "schema_version": "xtrl.pre_contract/v0.2",
  "packet_id": "pkt-v2-migrate-0002-runner-cutover",
  "component": "xtrlv2",
  "repo": "xtrlv2",
  "base_ref": "origin/main",
  "mode": "NORMAL",
  "budgets": {
    "time_minutes": 90,
    "iteration_budget": 2,
    "diff_budget": { "max_files_changed": 150, "max_lines_changed": 4000 }
  },
  "constraints": {
    "clean_repo_required": true,
    "deny_repo_local_roots": [".codex", ".quint"],
    "allowed_paths": [
      "tools/**",
      "schemas/**",
      "control/**",
      "docs/**",
      "packets/**",
      "README.md"
    ],
    "forbidden_paths": [".git/**"],
    "forbidden_patterns": [
      "bash\\s+-lc",
      "subprocess\\.run\\(.*shell\\s*=\\s*True",
      "os\\.system\\(",
      "eval\\(",
      "exec\\(",
      "\\|\\|\\s*true"
    ]
  },
  "actions": {
    "test": ["python", "-m", "pytest", "-q", "--junitxml", "evidence/tests.junit.xml"]
  },
  "evidence": {
    "required_files": [
      "evidence/plan.md",
      "evidence/decision.md",
      "evidence/scope.json",
      "evidence/integrity.json",
      "evidence/tests.junit.xml",
      "evidence/regression.md",
      "evidence/events.jsonl",
      "commands.log",
      "summary.md",
      "packet.json",
      "contract.json",
      "exec-prompt.md"
    ]
  },
  "plan_card": {
    "why": "Cut over runner to xtrlv2 with argv-only execution and no masking.",
    "what": "Port runner + contract materializer; run at least one packet end-to-end in xtrlv2 with truthful signals.",
    "how": "Replace string commands with argv-only; deny bash -lc and || true; ensure evidence v0.2 is emitted.",
    "where": "xtrlv2/tools/",
    "who": "controller",
    "when": "EXEC â†’ CHECK"
  },
  "inputs": {
    "notes": [
      "Runner must execute argv-only actions; no shell wrappers.",
      "End-to-end run should emit full EvidenceCapsule v0.2 tree."
    ]
  }
}
